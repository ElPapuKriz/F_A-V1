<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>¡Feliz día! Tenga sus flores amarillas</title>
  <style>body {
  margin: 0;
  min-height: 100vh;                /* usar min-height para evitar recortes por barras móviles */
  display: block;
  background: linear-gradient(120deg, #001f3f, #003366 30%, #1259a5 60%, #0a2342 80%, #1e3c72 100%);
  background-size: 300% 300%;
  animation: nightGradient 18s linear infinite;
  overflow-x: hidden;               /* evitar scroll horizontal en móvil */
  position: relative;
  padding-bottom: 24px;             /* espacio para contenidos en móviles */
}

/* Animación suave del degradado nocturno */
@keyframes nightGradient {
  0% { background-position: 0% 50%; }
  25% { background-position: 50% 100%; }
  50% { background-position: 100% 50%; }
  75% { background-position: 50% 0%; }
  100% { background-position: 0% 50%; }
}

h1 {
  color: #FFD700;
  font-size: 3em;
  text-align: center;
  margin-bottom: 20px;
  margin-top: 40px; /* Agrega espacio arriba */
  font-family: 'Segoe UI', sans-serif;
  text-shadow: 2px 2px 5px rgba(0,0,0,0.6);
  z-index: 10;
  position: relative;
}

/* Estrellas */
.star {
  position: absolute;
  background: white;
  border-radius: 50%;
  opacity: 0.8;
  animation: twinkle 3s infinite ease-in-out;
}

@keyframes twinkle {
  0%, 100% { opacity: 0.2; }
  50% { opacity: 1; }
}

.bouquet-row {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  margin-top: 60px;
  gap: 100px;
  position: relative;
  z-index: 2;
  padding: 0 24px;                  /* margen lateral para pantallas pequeñas */
  box-sizing: border-box;
}

/* Asegura que el contenedor sea referencia para los corazones */
.flores {
  position: relative;
}

/* Tamaños responsivos: usan min() para mantener buena apariencia en todos los anchos */
.flores img {
  width: min(320px, 40vw);          /* mayor en PC, proporcional en móvil */
  max-width: 100%;
  cursor: pointer;
  transform-origin: center center;
  will-change: transform;
  animation: none;
  display: block;
}

#gato-img {
  width: min(260px, 36vw);
  max-width: 100%;
  cursor: pointer;
  transform-origin: center center;
  will-change: transform;
  animation: none;
}

/* Corazones: versión más orgánica como antes */
.heart {
  position: absolute;
  left: 50%;
  top: -8px;
  transform: translate(-50%, 0) scale(1);
  font-size: 2.2em;
  color: #ff3366;
  opacity: 0.9;
  pointer-events: none;
  will-change: transform, opacity;
  animation: heartUp 1.2s cubic-bezier(.4,0,.2,1) forwards;
}

.heart-flor {
  position: absolute;
  left: 50%;
  top: -6px;
  transform: translate(-50%, 0) scale(1);
  font-size: 2.2em;
  color: #FFD700;
  opacity: 0.9;
  pointer-events: none;
  will-change: transform, opacity;
  animation: heartUpFlor 1.2s cubic-bezier(.4,0,.2,1) forwards;
}

@keyframes heartUp {
  0% {
    opacity: 0.9;
    transform: translate(-50%, 0) scale(1);
  }
  60% {
    opacity: 1;
    transform: translate(-50%, -40px) scale(1.2);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -80px) scale(0.8);
  }
}

@keyframes heartUpFlor {
  0% {
    opacity: 0.9;
    transform: translate(-50%, 0) scale(1);
  }
  60% {
    opacity: 1;
    transform: translate(-50%, -36px) scale(1.15);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -76px) scale(0.85);
  }
}

/* Escalas suaves tipo seno (más frames para suavizar) */
@keyframes floresScale {
  0%   { transform: scale(1); }
  12.5%{ transform: scale(1.04); }
  25%  { transform: scale(1.07); }
  37.5%{ transform: scale(1.05); }
  50%  { transform: scale(1.02); }
  62.5%{ transform: scale(0.99); }
  75%  { transform: scale(0.96); }
  87.5%{ transform: scale(0.98); }
  100% { transform: scale(1); }
}

@keyframes gatoScale {
  0%   { transform: scale(1); }
  15%  { transform: scale(1.05); }
  30%  { transform: scale(1.09); }
  45%  { transform: scale(1.12); }
  60%  { transform: scale(1.08); }
  75%  { transform: scale(1.03); }
  90%  { transform: scale(1.01); }
  100% { transform: scale(1); }
}

/* Responsive para celular: apilar, centrar y ajustar márgenes/tamaños */
@media (max-width: 700px) {
  h1 {
    font-size: 1.9em;
    margin-top: 18px;
    padding: 0 12px;
    line-height: 1.05;
  }

  .bouquet-row {
    flex-direction: column;
    align-items: center;
    gap: 20px;
    margin-top: 22px;
    padding: 0 16px;
  }

  .flores img {
    width: min(280px, 78vw);         /* más grande visualmente en móvil pero no rompe layout */
  }

  #gato-img {
    width: min(220px, 62vw);
  }

  /* ajustar posición de corazones si se solapan en móviles */
  .heart { top: -6px; font-size: 2.1em; }
  .heart-flor { top: -4px; font-size: 2.1em; }
}

/* Pequeñas pantallas muy estrechas */
@media (max-width: 420px) {
  h1 { font-size: 1.6em; }
  .flores img { width: min(240px, 86vw); }
  #gato-img { width: min(200px, 72vw); }
}
</style>
</head>
<body>
  <h1>¡Feliz día!<br>Tenga sus flores amarillas</h1>
  <div class="bouquet-row">
    <div class="flores">
      <img src="./flores.png" alt="flores">
    </div>
    <div class="gato-center">
      <img src="./gato.png" alt="gato" id="gato-img">
    </div>
    <div class="flores">
      <img src="./flores.png" alt="flores">
    </div>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
  // --- estrellas (ligero para no saturar) ---
  const numStars = 120;
  for (let i = 0; i < numStars; i++) {
    const star = document.createElement("div");
    star.classList.add("star");
    const size = (Math.random() * 1.8 + 0.8) + "px";
    star.style.width = size;
    star.style.height = size;
    star.style.top = Math.random() * 100 + "vh";
    star.style.left = Math.random() * 100 + "vw";
    star.style.animationDuration = (2 + Math.random() * 4) + "s";
    document.body.appendChild(star);
  }

  // --- selección de elementos a animar ---
  const flowers = () => Array.from(document.querySelectorAll('.flores img'));
  const getCat = () => document.getElementById('gato-img');

  // Corazones al click (gato)
  const cat = getCat();
  if (cat) {
    cat.addEventListener('click', function () {
      const heart = document.createElement('span');
      heart.className = 'heart';
      heart.innerHTML = '&#10084;';
      this.parentElement.appendChild(heart);
      setTimeout(() => heart.remove(), 1200); // sincronizado con la animación CSS
    });
  }

  function attachFlowerClicks() {
    flowers().forEach(flor => {
      flor.onclick = null;
      flor.addEventListener('click', function () {
        const heartFlor = document.createElement('span');
        heartFlor.className = 'heart-flor';
        heartFlor.innerHTML = '&#10084;';
        this.parentElement.appendChild(heartFlor);
        setTimeout(() => heartFlor.remove(), 1200); // sincronizado con la animación CSS
      });
    });
  }
  attachFlowerClicks();

  // --- parámetros de animación y estado por elemento ---
  function makeAnimItem(el, opts = {}) {
    return {
      el,
      phase: Math.random() * Math.PI * 2, // desfase aleatorio
      freq: opts.freq || (0.18 + Math.random() * 0.06), // ciclos por segundo
      amp: opts.amp || (0.035 + Math.random() * 0.03), // amplitud de escala
      bob: opts.bob || (4 + Math.random() * 8), // desplazamiento vertical px
      rot: opts.rot || (0.6 + Math.random() * 2), // rotación máxima en grados
      noiseFreq: 0.2 + Math.random() * 0.6,
      prev: { s: 1, y: 0, r: 0 } // para suavizado
    };
  }

  let animItems = [];

  function buildAnimItems() {
    animItems.length = 0;
    const small = window.innerWidth <= 700;
    flowers().forEach(f => {
      animItems.push(makeAnimItem(f, {
        freq: small ? 0.14 + Math.random() * 0.06 : 0.18 + Math.random() * 0.05,
        amp: small ? 0.03 : 0.045,
        bob: small ? 3 + Math.random() * 3 : 5 + Math.random() * 6,
        rot: small ? 0.6 + Math.random() * 1.2 : 1 + Math.random() * 2
      }));
    });
    const c = getCat();
    if (c) {
      animItems.push(makeAnimItem(c, {
        freq: small ? 0.12 : 0.18,
        amp: small ? 0.035 : 0.06,
        bob: small ? 5 : 8,
        rot: small ? 0.8 : 1.8
      }));
    }
  }
  buildAnimItems();

  // --- loop de animación con sine + filtro exponencial para suavizar ---
  let lastTime = performance.now();

  function frame(now) {
    const t = now / 1000; // segundos
    const dt = Math.min(0.05, (now - lastTime) / 1000);
    lastTime = now;

    // coeficiente dependiente de dt -> suave e independiente de framerate
    // k controla la "rigidez": menor k = más suave/retardado; usamos k ~ 6.5
    const k = 6.5;
    const alpha = 1 - Math.exp(-k * dt);

    for (let item of animItems) {
      const { el, phase, freq, amp, bob, rot, noiseFreq } = item;
      const omega = 2 * Math.PI * freq;

      // valores objetivo suaves con pequeñas variaciones "noise" de baja frecuencia
      const noise = 0.003 * Math.sin(2 * Math.PI * noiseFreq * t + phase * 0.7);
      const targetScale = 1 + amp * Math.sin(omega * t + phase) + noise;
      // bias para que el movimiento vertical sea ligero y amable
      const targetY = - (bob * (0.45 + 0.45 * Math.sin(omega * t + phase * 1.25)));
      const targetRot = rot * Math.sin(omega * t + phase * 0.6);

      // suavizado exponencial (no fixed lerp) para comportamiento fluido al detenerse
      const s = item.prev.s + (targetScale - item.prev.s) * alpha;
      const y = item.prev.y + (targetY - item.prev.y) * alpha;
      const r = item.prev.r + (targetRot - item.prev.r) * alpha;

      item.prev.s = s; item.prev.y = y; item.prev.r = r;

      // aplica transform con valores redondeados
      el.style.transform = `translateY(${y.toFixed(2)}px) rotate(${r.toFixed(3)}deg) scale(${s.toFixed(4)})`;
    }

    requestAnimationFrame(frame);
  }

  requestAnimationFrame(frame);

  // recalcula parámetros en resize y vuelve a adjuntar clicks para flores
  let resizeTimer = null;
  window.addEventListener('resize', () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(() => {
      buildAnimItems();
      attachFlowerClicks();
    }, 120);
  });
});

  </script>
</body>
</html>
